!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="eabe74d7-5abc-424c-ab8a-68739dfe5071",e._sentryDebugIdIdentifier="sentry-dbid-eabe74d7-5abc-424c-ab8a-68739dfe5071")}catch(e){}}();"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3476],{10184:function(e,n,t){t.d(n,{G:function(){return l}});let o=["EN","US","KR","JP","IN","TH"],r=["DE","NL","IT"],i=["EN","US","KR","IN","JP"],u=["FR","ES","RU","BR","PL"],c=["KR","FR","RU","JP","IT"],l=(e,n,t)=>{let l=e.toUpperCase(),a=n>=1e4||c.includes(l);return new Intl.NumberFormat("EN",{style:"decimal",...t,useGrouping:a}).formatToParts(n).map(e=>"group"===e.type?r.includes(l)?".":i.includes(l)?",":u.includes(l)?"\xa0":"":"decimal"===e.type?o.includes(l)?".":",":e.value).join("")}},65791:function(e,n,t){t.d(n,{J:function(){return u}});var o=t(10184);let r=["NL"],i=(e,n)=>{let t="KR"===e.toUpperCase(),o=(null==n?void 0:n.toUpperCase())==="JPY";return t||o?{maximumFractionDigits:0}:{minimumFractionDigits:2,maximumFractionDigits:2,trailingZeroDisplay:"stripIfInteger"}},u=e=>{let{country:n,currency:t,price:u,options:c}=e,l=n.toUpperCase(),a=(0,o.G)(n,u,{...i(n,t),...c});return"RU"===l&&"EUR"===t?"".concat(a,"\xa0евро"):r.includes(l)?"".concat(t,"\xa0").concat(a):"".concat(a,"\xa0").concat(t)}},32625:function(e,n,t){var o=t(97458);n.Z=e=>(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:16,height:16,"aria-hidden":!0,...e,children:(0,o.jsx)("path",{d:"M363.9 204c-3.9-9.3-13-15.4-23.1-15.4H171.1c-10.1 0-19.2 6.1-23.1 15.4s-1.7 20.1 5.4 27.2l84.9 84.9c4.9 4.9 11.3 7.3 17.7 7.3s12.8-2.4 17.7-7.3l84.9-84.9c7.1-7.1 9.2-17.9 5.3-27.2"})})},11091:function(e,n,t){var o=t(97458);n.Z=e=>(0,o.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"-49 141 512 512",width:16,height:16,"aria-hidden":!0,...e,children:[(0,o.jsx)("path",{d:"M442.139 362.501C454.18 360.479 463 350.056 463 337.846V276c0-30.327-24.673-55-55-55H6c-30.327 0-55 24.673-55 55v61.846c0 12.21 8.82 22.634 20.862 24.655C-11.254 365.335 1 379.844 1 397s-12.254 31.665-29.138 34.499C-40.18 433.521-49 443.944-49 456.154V518c0 30.327 24.673 55 55 55h402c30.327 0 55-24.673 55-55v-61.846c0-12.21-8.82-22.634-20.861-24.655C425.255 428.665 413 414.156 413 397s12.255-31.665 29.139-34.499M413 319.492c-29.912 13.415-50 43.297-50 77.508s20.088 64.093 50 77.508V518c0 2.757-2.243 5-5 5H151v-25c0-13.808-11.193-25-25-25s-25 11.192-25 25v25H6c-2.757 0-5-2.243-5-5v-43.492C30.913 461.093 51 431.211 51 397s-20.087-64.093-50-77.508V276c0-2.757 2.243-5 5-5h95v25c0 13.808 11.193 25 25 25s25-11.192 25-25v-25h257c2.757 0 5 2.243 5 5z"}),(0,o.jsx)("path",{d:"M126 357c-13.807 0-25 11.192-25 25v30c0 13.808 11.193 25 25 25s25-11.192 25-25v-30c0-13.808-11.193-25-25-25"})]})},93656:function(e,n,t){t.d(n,{W:function(){return r},x:function(){return o}});let o="addons",r={"FR-PACKA":"FR-PACKA"}},22503:function(e,n,t){t.d(n,{Jh:function(){return E},K7:function(){return D},DG:function(){return m},D2:function(){return f},pA:function(){return h},al:function(){return y.a},Ed:function(){return R}});var o=t(97458),r=t(93165),i=t(18166),u=t(71163),c=t(52983),l=t(93656),a=t(1850);let d=a.z.object({coupon_id:a.z.string().optional(),coupon_description:a.z.string().optional(),coupon_type:a.z.string().optional(),coupon_value:a.z.number().optional(),coupon_price_calculated:a.z.number().optional()}),s=a.z.object({tax:a.z.number(),import_taxes:a.z.number(),total_price:a.z.number()}),S=a.z.object({brand:a.z.string(),masked_number:a.z.string()}),p=a.z.object({product_product_code:a.z.string(),price_id:a.z.string(),price_currency:a.z.string(),price_amount_cents:a.z.number(),price_coupon:d,price_seats:a.z.number()}),M=a.z.object({addons:a.z.array(p),credits:a.z.number(),total_credits:a.z.number(),price_base_amount_cents:a.z.number(),price_base_coupon_price_calculated:a.z.number().nullable(),price_coupon_discount:a.z.number().nullable(),hasAutoRefill:a.z.boolean().optional(),subscription_id:a.z.string(),tax_info:s,pay_method:S}),L="/api/pricing-plans/addons",v=async e=>{let{userId:n}=e;try{var t;let e=null!==(t=new URLSearchParams(window.location.search).get("coupon"))&&void 0!==t?t:"",o=await fetch(L,{method:"POST",body:JSON.stringify({customerId:n,addons:[{productType:l.W["FR-PACKA"],quantity:1}],couponId:e})});if(!o.ok)return{success:!1};let r=await o.json(),i=M.parse(r);return{success:!0,data:i}}catch(e){return{success:!1}}},C=async e=>{let{userId:n,couponId:t,addons:o}=e;try{let e=await fetch(L,{method:"POST",body:JSON.stringify({customerId:n,addons:o,couponId:t})});if(!e.ok)return{success:!1};let r=await e.json(),i=M.parse(r);return{success:!0,data:i}}catch(e){return{success:!1}}},_=async e=>{let{userId:n,priceId:t,subscriptionId:o,quantity:r,couponId:i,autoRenewal:u}=e;try{return{success:(await fetch("".concat(L,"/confirm-payment"),{method:"POST",body:JSON.stringify({customerId:n,priceId:t,subscriptionId:o,quantity:r,couponId:i,autoRenewal:u})})).ok}}catch(e){return{success:!1}}},A={purchased:"purchased",sessionReady:"sessionReady",error:"error"},I=(0,c.createContext)(null),D=e=>{let{children:n,userId:t}=e,{t:a}=(0,u.$G)(l.x),[d,s]=(0,c.useState)(null),[S,p]=(0,c.useState)(""),[M,L]=(0,c.useState)(!1),[D,E]=(0,c.useState)(!1),[m,B]=(0,c.useState)(!1),[O,f]=(0,c.useState)(null),Y=(0,c.useCallback)((e,n)=>{let t={action:A[e],...n&&{error:n}};window.parent.postMessage(t)},[]);(0,c.useEffect)(()=>{(async()=>{let e=await v({userId:t});if(e.success){var n,o,r;s(e.data),E(null!==(o=e.data.hasAutoRefill)&&void 0!==o&&o),p(null!==(r=null===(n=e.data.addons[0].price_coupon)||void 0===n?void 0:n.coupon_id)&&void 0!==r?r:""),Y("sessionReady")}else Y("error","Something went wrong while fetching the addons' prices")})()},[t,Y]);let h=(0,c.useCallback)(async()=>{var e,n,o,r;let u=null==d?void 0:d.addons[0];if(L(!0),B(!1),f(null),!(await _({userId:t,priceId:null!==(n=null==u?void 0:u.price_id)&&void 0!==n?n:"",subscriptionId:null!==(o=null==d?void 0:d.subscription_id)&&void 0!==o?o:"",quantity:null!==(r=null==u?void 0:u.price_seats)&&void 0!==r?r:0,couponId:null==u?void 0:null===(e=u.price_coupon)||void 0===e?void 0:e.coupon_id,autoRenewal:D})).success){L(!1),B(!1),f(a("errorConfirmPayment")),Y("error","Something went wrong while confirming payment");return}L(!1),B(!0),f(null),(0,i.sendGTMEvent)({event:"ga4event",event_name:"credits_purchase",quantity:null==u?void 0:u.price_seats,auto_refil:D}),Y("purchased")},[null==d?void 0:d.addons,null==d?void 0:d.subscription_id,t,D,Y,a]),y=(0,c.useCallback)(async(e,n)=>{let o=null==d?void 0:d.addons.map(t=>{let o=t.product_product_code===e;return{productType:t.product_product_code,quantity:o?n:t.price_seats}}),r=await C({addons:null!=o?o:[],couponId:S,userId:t});r.success&&s(r.data)},[null==d?void 0:d.addons,t,S]),b=(0,c.useCallback)(async e=>{let n=null==d?void 0:d.addons.map(e=>({productType:e.product_product_code,quantity:e.price_seats})),o=await C({addons:null!=n?n:[],couponId:e,userId:t});if(!o.success)return!1;{let n=o.data.addons.some(n=>{var t;return(null===(t=n.price_coupon)||void 0===t?void 0:t.coupon_id)===e});return(s(o.data),n)?(p(e),!0):(p(""),!1)}},[null==d?void 0:d.addons,t]),R=(0,c.useMemo)(()=>d?d.addons.map(e=>{var n,t,o,i;let u=d.price_base_amount_cents,c=null!==(o=d.price_base_coupon_price_calculated)&&void 0!==o?o:0,l=null===(n=e.price_coupon)||void 0===n?void 0:n.coupon_id;return{discount:null!==(i=null===(t=e.price_coupon)||void 0===t?void 0:t.coupon_value)&&void 0!==i?i:0,currency:e.price_currency,name:e.product_product_code,price:(0,r.G)(u,e.price_currency),priceCoupon:l?(0,r.G)(c,e.price_currency):0,quantity:e.price_seats,credits:d.credits}}):[],[d]),g=(0,c.useMemo)(()=>{var e,n,t,o,i,u,c,l,a,s;let S=null==d?void 0:d.addons[0],p=null!==(e=null==S?void 0:S.price_currency)&&void 0!==e?e:"EUR";return{currency:p,totalCredits:null!==(n=null==d?void 0:d.total_credits)&&void 0!==n?n:0,credits:null!==(t=null==d?void 0:d.credits)&&void 0!==t?t:0,subtotalPrice:(0,r.G)(null!==(o=null==S?void 0:S.price_amount_cents)&&void 0!==o?o:0,p),totalPrice:(0,r.G)(null!==(i=null==S?void 0:S.price_amount_cents)&&void 0!==i?i:0,p),coupon:null==S?void 0:S.price_coupon,priceCouponDiscount:(0,r.G)(null!==(u=null==d?void 0:d.price_coupon_discount)&&void 0!==u?u:0,p),taxInfo:{tax:null!==(c=null==d?void 0:d.tax_info.tax)&&void 0!==c?c:0,importTaxes:(0,r.G)(null!==(l=null==d?void 0:d.tax_info.import_taxes)&&void 0!==l?l:0,p),totalPrice:(0,r.G)(null!==(a=null==d?void 0:d.tax_info.total_price)&&void 0!==a?a:0,p)},paymentMethod:"".concat(null==d?void 0:d.pay_method.brand," ").concat(null==d?void 0:d.pay_method.masked_number)||"-",hasAutoRefill:null!==(s=null==d?void 0:d.hasAutoRefill)&&void 0!==s&&s}},[null==d?void 0:d.addons,null==d?void 0:d.credits,null==d?void 0:d.hasAutoRefill,null==d?void 0:d.pay_method.brand,null==d?void 0:d.pay_method.masked_number,null==d?void 0:d.price_coupon_discount,null==d?void 0:d.tax_info.import_taxes,null==d?void 0:d.tax_info.tax,null==d?void 0:d.tax_info.total_price,null==d?void 0:d.total_credits]),w=M||(null==d?void 0:d.total_credits)===0,x=(0,c.useMemo)(()=>({isConfirmDisabled:w,isAutoRefill:D,offers:R,paymentSummary:g,validCoupon:S,isPurchased:m,error:O,onApplyCoupon:b,onChangeQuantity:y,onConfirmPayment:h,onAutoRefillChange:()=>E(e=>!e)}),[b,y,h,w,D,R,g,S,m,O]);return(0,o.jsx)(I.Provider,{value:x,children:n})},E=e=>{let{children:n}=e;return(0,o.jsx)(I.Consumer,{children:e=>{if(!e)throw Error("AddonsConsumer must be used within a AddonsProvider");return n(e)}})},m=()=>{let e=(0,c.useContext)(I);if(!e)throw Error("useAddons must be used within a AddonsProvider");return e};var B=t(30997),O=t(10184);let f=e=>{let{value:n}=e,t=(0,B.N)();return t?(0,O.G)(t,n):null};var Y=t(65791);let h=e=>{let{price:n,currency:t}=e,o=(0,B.N)();return o?(0,Y.J)({country:o,price:n,currency:t}):null};var y=t(8215),b=t(37904);let R=()=>{let{isPremiumPlus:e}=(0,b.hr)();return e}},28812:function(e,n,t){t.d(n,{o:function(){return i}});var o=t(7616);let r=(0,t(24399).cn)(!1),i=()=>{let[e,n]=(0,o.KO)(r);return{isOpenAddonsModal:e,showAddonsModal:()=>n(!0),hideAddonsModal:()=>n(!1)}}},8215:function(e,n,t){t.d(n,{a:function(){return u}});var o=t(20527),r=t(52983),i=t(28812);let u=e=>{let{showAddonsModal:n}=(0,i.o)(),[,t]=(0,o.n)({location:e,action:"get_credits"});return(0,r.useCallback)(()=>{t(),n()},[n,t])}},20527:function(e,n,t){t.d(n,{n:function(){return u}});var o=t(18166),r=t(52983),i=t(57122);let u=e=>{let n=(0,i.cE)(),t=(0,r.useCallback)(t=>{n&&(0,o.sendGTMEvent)({event:"ga4event",interaction_type:t,...e,...n})},[n,e]);return(0,r.useMemo)(()=>[()=>t("onload"),()=>t("click")],[t])}},93165:function(e,n,t){t.d(n,{G:function(){return r}});let o={ARS:{SYMBOL:"$",DECIMALS:2},AUD:{SYMBOL:"$",DECIMALS:2},THB:{SYMBOL:"฿",DECIMALS:2},BOB:{SYMBOL:"Bs",DECIMALS:2},BRL:{SYMBOL:"R$",DECIMALS:2},CAD:{SYMBOL:"$",DECIMALS:2},CLP:{SYMBOL:"$",DECIMALS:0},COP:{SYMBOL:"$",DECIMALS:2},CRC:{SYMBOL:"₡",DECIMALS:2},HRK:{SYMBOL:"kn",DECIMALS:2},CZK:{SYMBOL:"Kč",DECIMALS:2},DKK:{SYMBOL:"kr",DECIMALS:2},USD:{SYMBOL:"$",DECIMALS:2},EGP:{SYMBOL:"\xa3",DECIMALS:2},AED:{SYMBOL:"د.إ",DECIMALS:2},EUR:{SYMBOL:"€",DECIMALS:2},GTQ:{SYMBOL:"Q",DECIMALS:2},HNL:{SYMBOL:"L",DECIMALS:2},HKD:{SYMBOL:"HK$",DECIMALS:2},UAH:{SYMBOL:"₴",DECIMALS:2},HUF:{SYMBOL:"Ft",DECIMALS:2},IDR:{SYMBOL:"Rp",DECIMALS:2},KES:{SYMBOL:"KSh",DECIMALS:2},MMK:{SYMBOL:"Ks",DECIMALS:2},KGS:{SYMBOL:"с",DECIMALS:2},LBP:{SYMBOL:"\xa3",DECIMALS:2},RON:{SYMBOL:"lei",DECIMALS:2},BGN:{SYMBOL:"лв",DECIMALS:2},MYR:{SYMBOL:"RM",DECIMALS:2},AZN:{SYMBOL:"₼",DECIMALS:2},MXN:{SYMBOL:"$",DECIMALS:2},MAD:{SYMBOL:"د.م.",DECIMALS:2},NGN:{SYMBOL:"₦",DECIMALS:2},NZD:{SYMBOL:"$",DECIMALS:2},NIO:{SYMBOL:"C$",DECIMALS:2},NOK:{SYMBOL:"kr",DECIMALS:2},PKR:{SYMBOL:"₨",DECIMALS:2},PAB:{SYMBOL:"B/.",DECIMALS:2},PEN:{SYMBOL:"S/.",DECIMALS:2},PHP:{SYMBOL:"₱",DECIMALS:2},GBP:{SYMBOL:"\xa3",DECIMALS:2},QAR:{SYMBOL:"﷼",DECIMALS:2},INR:{SYMBOL:"₹",DECIMALS:2},SAR:{SYMBOL:"﷼",DECIMALS:2},RSD:{SYMBOL:"дин.",DECIMALS:2},ILS:{SYMBOL:"₪",DECIMALS:2},SGD:{SYMBOL:"S$",DECIMALS:2},ZAR:{SYMBOL:"R",DECIMALS:2},KRW:{SYMBOL:"₩",DECIMALS:0},LKR:{SYMBOL:"₨",DECIMALS:2},SEK:{SYMBOL:"kr",DECIMALS:2},CHF:{SYMBOL:"CHF",DECIMALS:2},TWD:{SYMBOL:"NT$",DECIMALS:2},BDT:{SYMBOL:"৳",DECIMALS:2},TZS:{SYMBOL:"TSh",DECIMALS:2},KZT:{SYMBOL:"₸",DECIMALS:2},TRY:{SYMBOL:"₺",DECIMALS:2},UYU:{SYMBOL:"$U",DECIMALS:2},UZS:{SYMBOL:"лв",DECIMALS:2},VND:{SYMBOL:"₫",DECIMALS:2},XOF:{SYMBOL:"CFA",DECIMALS:2},JPY:{SYMBOL:"\xa5",DECIMALS:0},CNY:{SYMBOL:"\xa5",DECIMALS:2},PLN:{SYMBOL:"zł",DECIMALS:2}},r=(e,n)=>{var t,r;return e/10**(null!==(r=null===(t=o[n])||void 0===t?void 0:t.DECIMALS)&&void 0!==r?r:2)}}}]);